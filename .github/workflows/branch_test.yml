name: branch_test
on:
  workflow_dispatch:
    inputs:
      bump:
        description: "bump"
        required: true
        default: false
        type: boolean
  pull_request:
  push:
      branches:
      - develop
jobs:
  branch_test:
    runs-on: ubuntu-latest
    steps:
      - name: find branch name
        run: | 
          echo "sha: " ${{ github.sha }}
          echo "ref_name: " ${{ github.ref_name }}
          echo "pull request head sha"
          echo ${{ github.event.pull_request.head.ref }}
          echo ${{ github.event.pull_request.head.sha }}

      - name: checkout
        uses: actions/checkout@v4

      - name: check ref_name
        id: check_ref_name
        run: |
          if [[ ${{ github.ref_name }} =~ ^[0-9]*\.[0-9]*\.[0-9]* ]]; then
            echo "is_version=true" >> $GITHUB_OUTPUT
          else
            echo "is_version=false" >> $GITHUB_OUTPUT
          fi

      - name: bump
        if: |
          github.event.inputs.bump &&
          steps.check_ref_name.outputs.is_version
        run: |
          echo "bump"